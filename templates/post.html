{{define "post.html"}}
    {{template "header" .}}
    <div class="post-container">
        <article class="post-full">
            <h1>{{.Post.Title}}</h1>
            <div class="post-meta">
                <span>By {{.Post.Username}}</span>
                <span>{{.Post.CreatedAt.Format "02 Jan 2006 15:04"}}</span>
            </div>
            <div class="post-content">
                {{.Post.Content}}
            </div>
            <div class="reactions">
                <button class="like-btn {{if .Post.UserLiked}}active{{end}}" 
                        data-post-id="{{.Post.ID}}" 
                        data-type="like">
                    👍 {{.Post.Likes}}
                </button>
                <button class="dislike-btn {{if .Post.UserDisliked}}active{{end}}" 
                        data-post-id="{{.Post.ID}}" 
                        data-type="dislike">
                    👎 {{.Post.Dislikes}}
                </button>
            </div>
        </article>

        {{if .User}}
            <div class="comment-form">
                <h3>Add Comment</h3>
                <form method="POST" action="/api/comment">
                    <input type="hidden" name="post_id" value="{{.Post.ID}}">
                    <textarea name="content" required placeholder="Write your comment here" aria-label="Comment content"></textarea>
                    <button type="submit">Submit</button>
                </form>
            </div>
        {{end}}

        <div class="comments">
            <h3>Comments</h3>
            {{range .Comments}}
                <div class="comment">
                    <div class="comment-meta">
                        <span>{{.Username}}</span>
                        <span>{{.CreatedAt.Format "02 Jan 2006 15:04"}}</span>
                    </div>
                    <div class="comment-content">
                        {{.Content}}
                    </div>
                    <div class="reactions">
                        <button class="like-btn {{if .UserLiked}}active{{end}}" 
                                data-comment-id="{{.ID}}" 
                                data-type="like">
                            👍 {{.Likes}}
                        </button>
                        <button class="dislike-btn {{if .UserDisliked}}active{{end}}" 
                                data-comment-id="{{.ID}}" 
                                data-type="dislike">
                            👎 {{.Dislikes}}
                        </button>
                    </div>
                </div>
            {{end}}
        </div>
    </div>
    {{template "footer" .}}
{{end}} 